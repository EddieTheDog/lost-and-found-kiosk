<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Track Ticket</title>
<link rel="stylesheet" href="style.css">
</head>
<body>
<h1>Track Your Ticket</h1>
<div id="ticketInfo"></div>

<script>
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get('id');
if (!id) document.getElementById('ticketInfo').textContent = "Invalid ticket";

async function fetchTicket() {
  const res = await fetch(`/ticket/${id}`);
  if (!res.ok) {
    document.getElementById('ticketInfo').textContent = "Ticket not found";
    return;
  }
  const ticket = await res.json();
  document.getElementById('ticketInfo').innerHTML = `
    <p><strong>Tracking ID:</strong> ${ticket.id}</p>
    <p><strong>Name:</strong> ${ticket.name}</p>
    <p><strong>Item:</strong> ${ticket.item}</p>
    <p><strong>Description:</strong> ${ticket.description}</p>
    <p><strong>Status:</strong> ${ticket.status}</p>
    <p><strong>Comments:</strong> ${ticket.comments.map(c => c.text).join(', ')}</p>
  `;
}

fetchTicket();
</script>
</body>
</html>
