<!DOCTYPE html>
<html>
<head>
  <title>Track Ticket</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 40px; }
    input, button { font-size: 18px; padding: 10px; margin: 10px; }
  </style>
</head>
<body>
  <h1>Track Your Ticket</h1>
  <input type="number" id="ticketId" placeholder="Enter Ticket ID">
  <button onclick="checkStatus()">Check Status</button>
  <div id="statusMessage"></div>

  <script>
    async function checkStatus() {
      const id = document.getElementById("ticketId").value;
      const res = await fetch("/tickets");
      const tickets = await res.json();
      const ticket = tickets.find(t => t.id == id);
      if (!ticket) { document.getElementById("statusMessage").innerHTML = "Ticket not found"; return; }
      const itemsHTML = ticket.items.map(i => `<strong>${i.name}</strong>: ${i.description} (${i.comments || ""})`).join("<br>");
      document.getElementById("statusMessage").innerHTML = `
        <p>Ticket #${ticket.id} status: ${ticket.status}</p>
        <p>Name: ${ticket.name}</p>
        <p>Contact: ${ticket.contact}</p>
        <p>Items:<br>${itemsHTML}</p>
      `;
    }
  </script>
</body>
</html>
